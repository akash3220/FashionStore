{
  "version": 3,
  "sources": ["../../three.orientation/index.js"],
  "sourcesContent": ["/* globals THREE, window */\n/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * @author Andrei Kashcha / https://github.com/anvaka:\n * + adopted to commonjs,\n * + restructured to avoid `this`\n * + preserve original object rotation\n * + original source code is here: http://threejs.org/examples/js/controls/DeviceOrientationControls.js\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nmodule.exports = orientationControl;\n\nvar degreeToRadiansFactor = Math.PI / 180;\nfunction degToRad(degrees) {\n  return degrees * degreeToRadiansFactor;\n}\n\nfunction orientationControl(object) {\n\n  object.rotation.reorder(\"YXZ\");\n\n  var enabled = false;\n  var deviceOrientation = {};\n  var screenOrientation = 0;\n\n  var originalRotation;\n  var setObjectQuaternion = createObjectQuaterionSetter();\n\n  connect();\n\n  return {\n    update: update,\n    connect: connect,\n    disconnect: disconnect,\n  };\n\n  function connect() {\n    deviceOrientation = {};\n    originalRotation = object.quaternion.clone();\n\n    onScreenOrientationChangeEvent(); // run once on load\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n\n    enabled = true;\n  }\n\n  function disconnect() {\n    enabled = false;\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n  }\n\n  function update() {\n    if (!enabled) return;\n\n    var alpha = deviceOrientation.alpha ? degToRad(deviceOrientation.alpha) : 0; // Z\n    var beta = deviceOrientation.beta ? degToRad(deviceOrientation.beta) : 0; // X'\n    var gamma = deviceOrientation.gamma ? degToRad(deviceOrientation.gamma) : 0; // Y''\n    var orient = screenOrientation ? degToRad(screenOrientation) : 0; // O\n\n    setObjectQuaternion(object.quaternion, alpha, beta, gamma, orient);\n  }\n\n  function onDeviceOrientationChangeEvent(event) {\n    deviceOrientation = event;\n  }\n\n  function onScreenOrientationChangeEvent() {\n    screenOrientation = window.orientation || 0;\n  }\n\n  function createObjectQuaterionSetter() {\n    var deviceEuler = new THREE.Euler();\n    var deviceQuaternion = new THREE.Quaternion();\n    var screenTransform = new THREE.Quaternion();\n    var worldTransform = new THREE.Quaternion(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)); // - PI/2 around the x-axis\n    var minusHalfAngle = 0;\n\n    return function(quaternion, alpha, beta, gamma, orient) {\n      quaternion.copy(originalRotation);\n      deviceEuler.set(beta, alpha, -gamma, 'YXZ'); // 'ZXY' for the device, but 'YXZ' for us\n      quaternion.multiply(deviceQuaternion.setFromEuler(deviceEuler)); // orient the device\n\n      minusHalfAngle = -orient / 2;\n      screenTransform.set( 0, Math.sin( minusHalfAngle ), 0, Math.cos( minusHalfAngle ) );\n\n      quaternion.multiply(screenTransform); // adjust for screen orientation\n      quaternion.multiply(worldTransform);  // camera looks out the back of the device, not the top\n    };\n  }\n}\n"],
  "mappings": ";;;;;AAAA;AAAA;AAcA,WAAO,UAAU;AAEjB,QAAI,wBAAwB,KAAK,KAAK;AACtC,aAAS,SAAS,SAAS;AACzB,aAAO,UAAU;AAAA,IACnB;AAEA,aAAS,mBAAmB,QAAQ;AAElC,aAAO,SAAS,QAAQ,KAAK;AAE7B,UAAI,UAAU;AACd,UAAI,oBAAoB,CAAC;AACzB,UAAI,oBAAoB;AAExB,UAAI;AACJ,UAAI,sBAAsB,4BAA4B;AAEtD,cAAQ;AAER,aAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAEA,eAAS,UAAU;AACjB,4BAAoB,CAAC;AACrB,2BAAmB,OAAO,WAAW,MAAM;AAE3C,uCAA+B;AAC/B,eAAO,iBAAiB,qBAAqB,gCAAgC,KAAK;AAClF,eAAO,iBAAiB,qBAAqB,gCAAgC,KAAK;AAElF,kBAAU;AAAA,MACZ;AAEA,eAAS,aAAa;AACpB,kBAAU;AACV,eAAO,oBAAoB,qBAAqB,gCAAgC,KAAK;AACrF,eAAO,oBAAoB,qBAAqB,gCAAgC,KAAK;AAAA,MACvF;AAEA,eAAS,SAAS;AAChB,YAAI,CAAC,QAAS;AAEd,YAAI,QAAQ,kBAAkB,QAAQ,SAAS,kBAAkB,KAAK,IAAI;AAC1E,YAAI,OAAO,kBAAkB,OAAO,SAAS,kBAAkB,IAAI,IAAI;AACvE,YAAI,QAAQ,kBAAkB,QAAQ,SAAS,kBAAkB,KAAK,IAAI;AAC1E,YAAI,SAAS,oBAAoB,SAAS,iBAAiB,IAAI;AAE/D,4BAAoB,OAAO,YAAY,OAAO,MAAM,OAAO,MAAM;AAAA,MACnE;AAEA,eAAS,+BAA+B,OAAO;AAC7C,4BAAoB;AAAA,MACtB;AAEA,eAAS,iCAAiC;AACxC,4BAAoB,OAAO,eAAe;AAAA,MAC5C;AAEA,eAAS,8BAA8B;AACrC,YAAI,cAAc,IAAI,MAAM,MAAM;AAClC,YAAI,mBAAmB,IAAI,MAAM,WAAW;AAC5C,YAAI,kBAAkB,IAAI,MAAM,WAAW;AAC3C,YAAI,iBAAiB,IAAI,MAAM,WAAW,CAAC,KAAK,KAAK,GAAG,GAAG,GAAG,GAAG,KAAK,KAAK,GAAG,CAAC;AAC/E,YAAI,iBAAiB;AAErB,eAAO,SAAS,YAAY,OAAO,MAAM,OAAO,QAAQ;AACtD,qBAAW,KAAK,gBAAgB;AAChC,sBAAY,IAAI,MAAM,OAAO,CAAC,OAAO,KAAK;AAC1C,qBAAW,SAAS,iBAAiB,aAAa,WAAW,CAAC;AAE9D,2BAAiB,CAAC,SAAS;AAC3B,0BAAgB,IAAK,GAAG,KAAK,IAAK,cAAe,GAAG,GAAG,KAAK,IAAK,cAAe,CAAE;AAElF,qBAAW,SAAS,eAAe;AACnC,qBAAW,SAAS,cAAc;AAAA,QACpC;AAAA,MACF;AAAA,IACF;AAAA;AAAA;",
  "names": []
}
